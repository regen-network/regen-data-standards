---
import MainLayout from "../../layouts/MainLayout.astro";
export async function getStaticPaths() {
    const schemas = await Astro.glob('../../../schema/generated/*.md');
    return schemas.map((entry) => {
        const file = entry.file;
        let filename = file.split('/').pop();
        let title = filename.slice(0, -3);

        // Make the generated index.md the root path.
        if (filename === 'index.md') {
            filename = undefined;
            title = 'Schemas';
        }

        // @TODO: don't keep .md in the slug path.
        // For now, this makes it easier to navigate while testing.
        return {
            params: {slug: filename},
            props: {entry, title},
        }
    })
}
const {entry, title} = Astro.props;
---
<MainLayout title={`${title} | Schema`}>
    <entry.Content/>
</MainLayout>
