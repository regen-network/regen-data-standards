---
import type {MarkdownInstance} from "astro";
import MainLayout from "../../layouts/MainLayout.astro";
export async function getStaticPaths() {
    const schemas: MarkdownInstance<{}>[] = await Astro.glob('../../../schema/generated/*.md');
    return schemas.map((entry) => {
        const file = entry.file;
        let filename = file.split('/').pop();
        let title, slug = filename?.slice(0, -3);

        // Make the generated index.md the root path.
        if (filename === 'index.md') {
            slug = undefined;
            title = 'Schemas';
        }

        // For now, this makes it easier to navigate while testing.
        return {
            params: {slug},
            props: {entry, title},
        }
    })
}
const {entry, title} = Astro.props;
---
<MainLayout title={`${title} | Schema`}>
    <entry.Content/>
</MainLayout>
